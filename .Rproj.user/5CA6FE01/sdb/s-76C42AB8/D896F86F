{
    "contents" : "---\ntitle       : USA Severe Weather - travel risk advisor\nsubtitle    : A shiny app to inform about severe weather in USA\nauthor      : Barthelemy Longueville\njob         : Coursera - Developping Data Products Assignement - July 2015\nframework   : io2012        # {io2012, html5slides, shower, dzslides, ...}\nhighlighter : highlight.js  # {highlight.js, prettify, highlight}\nhitheme     : tomorrow      # \nwidgets     : []            # {mathjax, quiz, bootstrap}\nmode        : standalone # {standalone, draft, selfcontained}\nknit        : slidify::knit2slides\n---\n\n## App objectives and principle\n\nThe objective of this shiny app is to inform the user about the most critical severe weather risks which could be encoutered while travelling to a specific USA State during a specific month.\n\nAs inputs, the user have to select the month of travelling, an USA state of destination, the type of risk. Global risk index is selected per default, but one can choose health impact or damages impact\n\nThe app returns :\n\n1. The most important severe weather event in term of impact (as selected by the user), with a map of USA showing where this type of weather event is the most active for the month\n2. The estimation of what would be the best month to travel in this state\n3. The estimation of what would be the best (safest) state to travel during this month\n\nThe app is available here : https://longwei.shinyapps.io/weather-shiny-app\n\n--- .class #id \n\n## Data Source\n\n```{r loadTheData, echo=FALSE, message=FALSE}\n## load the app functions\nsource(\"../weather-shiny-app/R/severe-weather-functions.R\")\nload_libraries()\nweather <- load_data(\"../weather-shiny-app/data/severe-weather-compact-db.csv\")\n\n```\n\nThe data used by this app is a cleaned and tidy data set of severe weather events in the US since 1950 evaluated from both financial and health impact cumed for each month of the year, each state and event type. Initial data is from the NOAA Storm Database (see \nhttp://rpubs.com/longwei66/87696 for details). This dataset is stored in the data frame `weather` which consists in `r dim(weather)[1]` of `r dim(weather)[2]` variables. An extract is presented bellow.\n\n```{r viewSummaryData, echo=F, message=F, results='asis'}\nlibrary(xtable)\nxt <-  xtable(weather[1:3,c(2:4,9:11)])\nprint(xt, type = \"html\")\n```\n\n1. health_impact represent the sum of fatalities and injuries over the period for the month mentioned in column month\n2. DMG is the total damages (crop and property) in USD over the period for the month\n3. Risk index is an aggregated risk evaluation (see next slide)\n\n--- .class #id \n\n## Risk Index\n\nThe risk index is a composite of log of total damages (crop and property) in USD and health impact (in number of injuries and fatalities) normalised to be between 0 and 100.\n\n`riskIndex = (log(DMG + 1)/1.1 + 4 * log(health_impact + 1))`\n\n`riskIndexNorm = riskIndex / max(riskIndex) * 100`\n\n```{r riskIndex, echo=F, fig.width=14, fig.height = 4.5}\npar(mfrow = c(1,4), mar = c(6, 5, 5, 6), oma = c(1, 1, 2, 0))\nwith(weather, {\n        hist(log(health_impact), main = \"Impact on health (log of fatalities+injuries)\", col = \"grey\", cex.lab = 1.5, cex.axis = 1.5, cex.main = 1.5)\n        hist(log(DMG), main = \"Damages in UDS (log)\", cex = 0.6, col = \"grey\", cex.lab = 1.5, cex.axis = 1.5, cex.main = 1.5)\n        hist(log(DMG + 1)/1.1 + 4 * log(health_impact + 1), main = \"Risk index formula\", xlab = \"Risk Index\", cex.lab = 1.5, cex.axis = 1.5, cex.main = 1.5, col = \"darkgreen\")\n        hist((log(DMG + 1)/1.1 + 4 * log(health_impact + 1))/max(log(DMG + 1)/1.1 + 4 * log(health_impact + 1))*100, main = \"Risk index formula (normalised to 100)\", xlab = \"Risk Index Norm.\", cex.lab = 1.5, cex.axis = 1.5, cex.main = 1.5, col = \"firebrick\")\n        mtext(\"Defining composite riskIndex\", outer = TRUE, cex = 1.5)\n}\n     )\n\n```\n\n\n--- .class #id \n\n## Mapping the risks\n\n\nTo give better understanding of the risks, we have integrated a [choropleth map](https://en.wikipedia.org/wiki/Choropleth_map) of USA states, illustrating similar type of events risks.\n\n```{r mappingrisk, fig.width=4, fig.height=3}\nplot_weather_map(weather, eventType = \"TORNADO\", monthView = 5)\n\n```\n\nWe have followed this excellent tutorial to design the risk mapping function \n[https://trinkerrstuff.wordpress.com](https://trinkerrstuff.wordpress.com/2013/07/05/ggplot2-chloropleth-of-supreme-court-decisions-an-tutorial/)\n\nOur app code is available on github : [https://github.com/longwei66/](https://github.com/longwei66/severe-weather-usa-app/tree/master/weather-shiny-app)\n",
    "created" : 1437491209779.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "4244630916",
    "id" : "D896F86F",
    "lastKnownWriteTime" : 1437491234,
    "path" : "~/ownCloud/Projets/Data-Science/coursera/9_Developping_data_products/Project-Assignement/severe-weather-usa-app/pitch-severe-weather-app/pitch-severe-weather-app.Rmd",
    "project_path" : "pitch-severe-weather-app/pitch-severe-weather-app.Rmd",
    "properties" : {
    },
    "relative_order" : 7,
    "source_on_save" : false,
    "type" : "r_markdown"
}